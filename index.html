<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VanillemÃ©trie</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./index.css" />
  <link rel="icon" type="image/x-icon" href="./favicon.ico" />
  <script>
    window.dataLayer = window.dataLayer || [];
    dataLayer.push({
      event: 'page_view',
      page: {
        content_group: 'homepage',
      },
    });
  </script>
  <script src="./index.js" defer></script>
</head>

<body>
  <header>
    <div id="header-first-row">
      <a href="./" class="logo-link">
        <img src="./logo.svg" alt="VanillemÃ©trie - Curved line representing a vanilla pod" width="180" height="40" />
      </a>
      <form id="gtm-container-id-form" method="get">
        <label>
          <input type="text" id="gtm-container-id-input" name="gtm-container-id" placeholder="GTM-123XYZ" />
        </label>
        <button type="submit" class="cta-secondary">Submit</button>
      </form>
    </div>
    <nav id="categoriesNav" aria-label="Main navigation">
      <div class="nav-links">
        <a href="./categories/essentiels-culinaires">Essentiels culinaires</a>
        <!-- <a href="./categories/delices-artisanaux">DÃ©lices artisanaux</a>
        <a href="./categories/beaute-et-bien-etre">BeautÃ© et bien-Ãªtre</a> -->
      </div>
      <a href="./cart" class="cart-link" aria-label="View shopping cart">
        <img src="./icons/cart.svg" alt="" width="24" height="24" />
        <span class="sr-only">Panier</span>
      </a>
    </nav>
  </header>

  <main id="main-content">
    <div class="hero-section">
      <h1>Accueil</h1>
      <p class="hero-text">
        Bienvenue sur VanillemÃ©trie, un bac Ã  sable pour expÃ©rimenter avec
        votre propre conteneur Google Tag Manager.
      </p>
      <div class="cta-container">
        <a href="./categories/essentiels-culinaires" class="cta-primary"
          onclick="dataLayer.push({event: 'click', category: 'cta', action: 'shop', label: 'Magasiner'})">
          Magasiner
        </a>
      </div>
      <div class="newsletter-container">
        <form action="./" method="post">
          <label>
            <h2>Abonnez-vous Ã  notre infolettre</h2>
            <input type="email" id="newsletter-email-input" name="newsletter-email" placeholder="Votre adresse courriel"
              onfocus="handleFocus(event)" />
            <script>
              function handleFocus(event) {
                window.dataLayer.push({
                  event: "form_start",
                  interaction: {
                    form_name: "newsletter-footer"
                  }
                })
                event.target.onfocus = null;
              }
            </script>
          </label>
          <script>
            function handleSubscribe(event) {
              event.preventDefault();
              const emailInput = document.getElementById('newsletter-email-input');
              const emailValue = emailInput.value;
              if (!emailValue) {
                alert('Veuillez entrer une adresse courriel.');
                return;
              }
              if (!emailValue.includes('@')) {
                alert('Veuillez entrer une adresse courriel valide.');
                return;
              }
              const subscribedMessage = document.querySelector('.newsletter-container span');
              subscribedMessage.style.display = 'block';
              emailInput.value = '';
              setTimeout(() => {
                subscribedMessage.style.display = 'none';
              }, 3000);
              window.dataLayer.push({
                event: 'generate_lead',
                user: {
                  email: emailValue,
                },
                interaction: {
                  lead_source: 'newsletter',
                },
              });
            };
          </script>
          <button type="submit" onclick="handleSubscribe(event)" class="cta-primary">S'abonner</button>
          <span style="background-color: green; color: white; display: none;">Subscribed! ðŸŽ‰</span>
        </form>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-section">
        <h2>Liens utiles</h2>
        <ul class="footer-links">
          <li>
            <a href="./docs">Documentation</a>
          </li>
        </ul>
      </div>
    </div>
  </footer>
</body>

</html>